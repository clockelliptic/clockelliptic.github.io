(this.webpackJsonpdrawing=this.webpackJsonpdrawing||[]).push([[0],{101:function(e,t,n){e.exports=n(131)},110:function(e,t,n){},111:function(e,t,n){},131:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),o=n(23),c=n(7),i=(n(110),n(14)),u=(n(111),n(67)),l=Object(u.a)("qwertyuiopasdfghjklzxcvbnm"),s=Object(u.a)("1234567890"),d=function(e){return e%2===0},E=function(e){return e[Math.floor(Math.random()*e.length)]},f=function(){var e=[window.innerWidth/2,window.innerHeight],t=e[0],n=e[1];return.9*(t>n?n:t)},L={Canvas:{size:{width:f(),height:f()}},Palette:{selectedColor:"",Colors:""},Toolbar:{selectedTool:"",Tools:""},Layers:{selectedLayer:void 0,localLayers:[],guestLayers:[]},Status:{sendingData:!1,receivingData:!1},Session:{userId:Array(256).fill().map((function(e,t){var n=d(Math.floor(2*Math.random()))&&d(t);return E(n?l:s)})).join("")}},y="3119dd4a27bd972a12a1",A="us2",g={CANVAS_RESIZE:"CANVAS_RESIZE",PALETTE_SELECT:"PALETTE_SELECT",TOOL_SELECT:"TOOL_SELECT",LAYER_ADD:"LAYER_ADD",LAYER_DELETE:"LAYER_DELETE",LAYER_UPDATE_DATA:"LAYER_UPDATE_DATA",LAYER_UPDATE_COLOR:"LAYER_UPDATE_COLOR",LAYER_SELECT:"LAYER_SELECT",UPDATE_DATA_COMPLETE:"UPDATE_DATA_COMPLETE",RECEIVING_DATA:"RECEIVING_DATA"},b={resizeCanvas:function(){return{type:g.CANVAS_RESIZE,size:{width:f(),height:f()}}},selectColor:function(e){return{type:g.PALETTE_SELECT,color:e}},selectTool:function(e){return{type:g.TOOL_SELECT,tool:e}},addLayer:function(e){return Object.assign({type:g.LAYER_ADD,layer:e})},deleteLayer:function(e){return{type:g.LAYER_DELETE,layer:e}},updateLayerData:function(e,t){return{type:g.LAYER_UPDATE_DATA,new_data:t,layer:e}},udateLayerColor:function(e,t){return{type:g.LAYER_UPDATE_COLOR,color:t,layer:e}},selectLayer:function(e){return{type:g.LAYER_SELECT,layer:e}},sendDataUpdateFulfilled:function(){return{type:g.UPDATE_DATA_COMPLETE}},receivingStatus:function(){return{type:g.RECEIVING_DATA}}},O={LAYER_ADD:"GUEST_LAYER_ADD",LAYER_DELETE:"GUEST_LAYER_DELETE",LAYER_UPDATE_DATA:"GUEST_LAYER_UPDATE_DATA",LAYER_UPDATE_COLOR:"GUEST_LAYER_UPDATE_COLOR",LAYER_SELECT:"GUEST_LAYER_SELECT"},m=n(160),p=n(150),T=n(151),_=n(149),h=n(148),v=n(147),D=n(161),j=n(1),w=n(77),R=n.n(w),S=n(78),C=n.n(S);function P(){var e=Object(i.a)(["\n/*\n  & > g > #Jungle * {\n    stroke: #ff0;\n  }\n\n  & > g > #Jungle #Blastcone1 {\n    fill: #ffF !important;\n  }\n\n  & > g > #BlueObjectives * {\n    stroke: #00f;\n  }\n\n  & > g > #RedObjectives * {\n    stroke: #f00;\n  }\n\n  & > g > #RedObjectives * {\n    stroke: #f00;\n  }\n\n  & > g > #RedObjectives * > #Base3 > #Mid2 {\n    stroke: #f00;\n    display: none;\n  }\n*/\n"]);return P=function(){return e},e}var k=Object(j.default)(R.a)(P()),Y=function(){return a.a.createElement(k,{src:C.a})},x=n(164),U=function(e){var t=Object(c.c)((function(e){return e.Layers})).selectedLayer,n=Object(c.c)((function(e){return e.Canvas.size})),r=n.width,o=n.height,i=function(e){var t=b.updateLayerData;return{onDragStart:function(n){return function(r){var a=r.x,o=r.y;return e(t(n,[{x:a,y:o}]))}},onDragMove:function(n){return function(r){var a=r.x,o=r.y,c=r.dx,i=r.dy;return e(t(n,[{x:a+c,y:o+i}]))}},onDragEnd:function(n){return function(r){var a=r.x,o=r.y;return e(t(n,[{x:a,y:o}]))}}}}(Object(c.b)()),u=i.onDragStart,l=i.onDragMove,s=i.onDragEnd;return a.a.createElement(x.a,{width:r,height:o,resetOnStart:!0,onDragStart:u(t),onDragMove:"Pencil"===t.type?l(t):function(){},onDragEnd:"Pencil"===t.type?s(t):function(){}},M(r,o))},M=function(e,t){return function(n){var r=n.x,o=n.y,c=n.dx,i=n.dy,u=n.isDragging,l=n.dragStart,s=n.dragEnd,d=n.dragMove;return a.a.createElement("g",null,a.a.createElement((function(){return u&&a.a.createElement("g",null,a.a.createElement("circle",{fill:"none",stroke:"white",width:8,height:8,cx:r+c,cy:o+i,r:3,style:{pointerEvents:"none"}}))}),null),a.a.createElement((function(){return a.a.createElement("rect",{fill:"transparent",width:e,height:t,onMouseDown:l,onMouseUp:s,onMouseMove:d,onTouchStart:l,onTouchEnd:s,onTouchMove:d})}),null))}},z=function(e){var t=Object(c.c)((function(e){return e.Layers})),n=t.guestLayers,o=t.localLayers,i=t.selectedLayer;!function(e){var t=function(t){e(b.resizeCanvas())};Object(r.useEffect)((function(){return window.addEventListener("resize",t),function(){window.removeEventListener("resize",t)}}))}(Object(c.b)());var u=Object(c.c)((function(e){return e.Canvas.size})),l=u.width,s=u.height;return a.a.createElement(D.a,{className:"Draw",style:{touchAction:"none"}},a.a.createElement("svg",{width:1*l,height:1*s},a.a.createElement(p.a,{id:"stroke",from:"#ff614e",to:"#ffdc64"}),a.a.createElement(T.a,{id:"backgroundSphere",from:"transparent",to:"#04002b",toOpacity:"40%",fromOpacity:"60%",fromOffset:"90%"}),a.a.createElement((function(){return a.a.createElement("rect",{fill:"url(#backgroundSphere)",strokeWidth:5,width:1*l,height:1*s,rx:"100%"})}),null),a.a.createElement(Y,null),a.a.createElement((function(){return o.map((function(e,t){return a.a.createElement(m.a,{key:"line-".concat(e.id,"-").concat(t),fill:"transparent",stroke:"url(#stroke)",strokeWidth:3,data:e.data,curve:v.a.tension(.1),x:function(e){return e.x},y:function(e){return e.y}})})).concat(n.map((function(e,t){return a.a.createElement(m.a,{key:"guestLine-".concat(e.id,"-").concat(t),fill:"transparent",stroke:"url(#stroke)",opacity:.5,strokeWidth:3,data:e.data,curve:v.a.tension(.1),x:function(e){return e.x},y:function(e){return e.y}})})))}),null),a.a.createElement((function(){return o.filter((function(e){return e.id===i.id})).map((function(e,t){return a.a.createElement(h.a,{key:"pointGroup-".concat(e.id,"-").concat(t)},e.data.map((function(t,n){return a.a.createElement(_.a,{key:"point-".concat(e.id,"-").concat(n),className:"dot",cx:t.x,cy:t.y,r:2,fill:"#ff2c34",opacity:.8})})))}))}),null),a.a.createElement(U,null)))},I=n(65),N=n(167),G=n(152);function V(){var e=Object(i.a)(["\n        margin: 0;\n    "]);return V=function(){return e},e}function W(){var e=Object(i.a)(["\n        height: 100%;\n        background: rgba(0,0,0,0.3);\n        overflow-y: scroll;\n    "]);return W=function(){return e},e}function J(){var e=Object(i.a)(["\n        border-bottom: 1px solid rgba(0,0,0,0.8);\n        background-color: ",";\n        overflow: hidden;\n        height: 45px;\n        display: flex;\n        color: rgba(220,220,220,1);\n    "]);return J=function(){return e},e}function B(){var e=Object(i.a)(["\n        margin: auto 0 auto 10px;\n        width: 100%\n    "]);return B=function(){return e},e}function F(){var e=Object(i.a)(["\n        height: 100%;\n        padding: 0 5px 0 5px;\n    "]);return F=function(){return e},e}var Z=function(e){var t=e.layer,n=Object(c.b)(),r=t.id===Object(c.c)((function(e){return e.Layers.selectedLayer.id}));var o=Object(j.default)(G.a)(F()),i=j.default.div(B()),u=j.default.div(J(),(function(e){return e.isSelected?"rgba(0,0,0,0.3)":"rgba(0,0,0,0.1)"}));return a.a.createElement(u,{onClick:function(){n(b.selectLayer(t))},isSelected:r},a.a.createElement(N.a,{style:{width:"100%"},rows:["auto"],columns:["auto","auto","34px"],gap:"none",areas:[{name:"name",start:[0,0],end:[0,0]},{name:"owner",start:[1,0],end:[1,0]},{name:"colorSelect",start:[2,0],end:[2,0]}]},a.a.createElement(i,{gridArea:"name"},"Layer ".concat(t.id)),a.a.createElement(i,{gridArea:"owner"},"Owner ".concat(t.owner.slice(0,5))),a.a.createElement(o,{gridArea:"colorSelect"})))},H=function(e){var t=Object(c.c)((function(e){return e.Layers})),n=t.localLayers,r=(t.selectedLayer,Object(j.default)(D.a)(W())),o=Object(j.default)(Object(I.WidthProvider)(I.Responsive))(V()),i={md:n.map((function(e,t){return{i:"".concat(t),x:0,y:t,w:1,h:1}}))},u=n.map((function(e,t){return a.a.createElement(Z,{key:"layerListItem".concat(t),layer:e})}));return a.a.createElement(r,null,a.a.createElement(o,{className:"LayersList",layouts:i,breakpoints:{md:0},cols:{md:1},rowHeight:10,margin:[2,2],containerPadding:[10,10],isDraggable:!1},u))},X=n(153),q=n(154);function $(){var e=Object(i.a)(["\n        background: rgba(0,0,0,0.5);\n    "]);return $=function(){return e},e}var K=function(){var e=Object(c.b)(),t=Object(c.c)((function(e){return e.Layers.selectedLayer})),n=Object(c.c)((function(e){return e.Session.userId})),r=Object(j.default)(D.a)($());return a.a.createElement(r,{direction:"row"},a.a.createElement(X.a,{onClick:function(){!function(e,t){e(b.deleteLayer(t))}(e,t)}}),a.a.createElement(q.a,{onClick:function(){!function(e,t){var n={id:Math.floor(1e5*Math.random()),owner:t,tool:"autopen",color:"#000",data:[]};e(b.addLayer(n)),e(b.selectLayer(n))}(e,n)}}))},Q=n(155),ee=n(156),te=function(){var e=Object(c.c)((function(e){return e.Status.sendingData}))?"var(--linkup)":"gray",t=Object(c.c)((function(e){return e.Status.receivingData}))?"var(--linkdown)":"gray";return a.a.createElement(D.a,{direction:"row"},a.a.createElement(Q.a,{size:"small",color:e}),a.a.createElement(ee.a,{size:"small",color:t}))},ne=n(162);function re(){var e=Object(i.a)(["\n    position: absolute;\n    bottom: 5px;\n  "]);return re=function(){return e},e}function ae(){var e=Object(i.a)(['\n    font-family: "bungee";\n    font-size: 38px;\n    line-height: 30px;\n    color: white;\n    margin: 1% auto 0 auto;\n    width: 100%;\n    text-align: center;\n    z-index:101;\n  ']);return ae=function(){return e},e}var oe,ce,ie,ue=n(35),le=n(159),se=n(9),de=n(39);function Ee(e,t){return function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e,r=arguments.length>1?arguments[1]:void 0;return t.hasOwnProperty(r.type)?t[r.type](n,r):n}}var fe,Le=function(e){var t=e.id,n=e.owner,r=e.tool,a=e.color;return{owner:n,id:t,tool:r,data:e.data,color:a}},ye=Ee([],(oe={},Object(se.a)(oe,O.LAYER_ADD,(function(e,t){return e.concat([Le(t.layer)])})),Object(se.a)(oe,O.LAYER_DELETE,(function(e,t){return e.filter((function(e){return e.id!==t.layer.id}))})),Object(se.a)(oe,O.LAYER_UPDATE_DATA,(function(e,t){return e.reduce((function(e,n){return e.concat([n.id!==t.layer.id?n:Object(de.a)({},n,{data:n.data.concat(t.new_data)})])}),[])})),Object(se.a)(oe,O.LAYER_UPDATE_COLOR,(function(e,t){return e.reduce((function(e,n){return n!==t.layer?e:Object(de.a)({},n,{color:t.color})}),[])})),oe)),Ae=Ee([],Object(se.a)({},g.CANVAS_RESIZE,(function(e,t){return t.size}))),ge=Ee([],(ce={},Object(se.a)(ce,g.LAYER_ADD,(function(e,t){return e.concat([Le(t.layer)])})),Object(se.a)(ce,g.LAYER_DELETE,(function(e,t){return e.filter((function(e){return e.id!==t.layer.id}))})),Object(se.a)(ce,g.LAYER_UPDATE_DATA,(function(e,t){return e.reduce((function(e,n){return console.log(t.layer.id,n.id),e.concat([n.id!==t.layer.id?n:Object(de.a)({},n,{data:n.data.concat(t.new_data)})])}),[])})),Object(se.a)(ce,g.LAYER_UPDATE_COLOR,(function(e,t){return e.reduce((function(e,n){return n.id!==t.layer.id?e:Object(de.a)({},n,{color:t.color})}),[])})),ce)),be=Ee([],Object(se.a)({},g.LAYER_SELECT,(function(e,t){return{id:t.layer.id,owner:t.layer.owner}}))),Oe=Ee([],Object(se.a)({},g.PALETTE_SELECT,(function(e,t){return t.color}))),me=Ee([],Object(se.a)({},g.TOOL_SELECT,(function(e,t){return t.tool}))),pe=Ee([],(ie={},Object(se.a)(ie,g.LAYER_UPDATE_DATA,(function(e,t){return!0})),Object(se.a)(ie,g.UPDATE_DATA_COMPLETE,(function(){return!1})),ie)),Te=n(163),_e=n(98),he=n(165),ve=n(92),De=new(n.n(ve).a)(y,{cluster:A,forceTLS:!0}).subscribe("painting"),je=n(157),we=n(93),Re=n(166),Se=n(29),Ce=n(94),Pe=n(158),ke=g,Ye=function(e,t,n){return e.pipe(Object(_e.a)(ke.LAYER_ADD,ke.LAYER_DELETE,ke.LAYER_UPDATE_COLOR,ke.LAYER_UPDATE_DATA),Object(we.a)((function(e){return function(e){return Object(he.a)({url:"https://agile-brushlands-35070.herokuapp.com/paint",method:"post",headers:{"Content-Type":"application/json"},body:{data:JSON.stringify(e)}})}(e).pipe(Object(Re.a)(1e3),Object(Se.a)((function(e){return console.log("update posted",b.sendDataUpdateFulfilled(),e),b.sendDataUpdateFulfilled()})),Object(je.a)((function(e){return console.log("error: ",e),Object(Ce.a)(e)})))})))},xe=(Object(Pe.a)(window,"click").pipe(Object(Se.a)((function(e){return"Event time: ".concat(e.timeStamp)}))).subscribe((function(e){return console.log(e)})),"undefined"!==typeof window&&window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||ue.c),Ue=Object(le.a)(),Me=Object(ue.d)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:L,t=arguments.length>1?arguments[1]:void 0;return{Canvas:{size:Ae(e.Canvas.size,t)},Palette:{selectedColor:Oe(e.Palette.selectedColor,t),Colors:e.Palette.Colors},Toolbar:{selectedTool:me(e.Toolbar.selectedTool,t),Tools:e.Toolbar.tools},Layers:{selectedLayer:be(e.Layers.selectedLayer,t),localLayers:ge(e.Layers.localLayers,t),guestLayers:ye(e.Layers.guestLayers,t)},Status:{sendingData:pe(e.Status.sendingData,t),receivingData:!1},Session:e.Session}}),xe(Object(ue.a)(Ue)));Ue.run((function(e,t,n){return Object(Te.a)(Ye)(e,t,n).pipe(Object(je.a)((function(e,t){return console.error("epic error: ",e),t})))})),fe=Me.dispatch,console.log("binding pusher `action` channel"),De.bind("action",(function(e){var t=JSON.parse(e.data),n=Object.assign(t,{type:O[t.type]});console.log("mapped action from server",n),fe(n)}));var ze=Me;Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));Object(o.render)(a.a.createElement(c.a,{store:ze},a.a.createElement((function(){var e=Object(j.default)(D.a)(ae()),t=Object(j.default)(D.a)(re());return a.a.createElement(ne.a,{style:{height:"100vh"}},a.a.createElement(N.a,{fill:!0,rows:["auto","xxsmall"],columns:["1/4","1/2","1/4"],gap:"none",areas:[{name:"title",start:[1,1],end:[1,1]},{name:"leftPanel",start:[0,0],end:[0,1]},{name:"centerPanel",start:[1,0],end:[1,0]},{name:"rightPanel",start:[2,0],end:[2,1]}]},a.a.createElement(D.a,{gridArea:"title"},a.a.createElement(e,null,"Playmaker Strategist")),a.a.createElement(D.a,{style:{background:"rgba(0,0,0,0.3)"},gridArea:"rightPanel"},a.a.createElement(t,null,a.a.createElement(te,null))),a.a.createElement(D.a,{gridArea:"leftPanel"},a.a.createElement(K,null),a.a.createElement(H,null)),a.a.createElement(D.a,{gridArea:"centerPanel",align:"center",justify:"center"},a.a.createElement(z,null))))}),null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},78:function(e,t,n){e.exports=n.p+"static/media/summonersrift.3b0be098.svg"}},[[101,1,2]]]);
//# sourceMappingURL=main.2002ce60.chunk.js.map